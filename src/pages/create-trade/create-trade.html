<template>
    <div id="create-trade" class="mt-5 pl-5 pr-5">
        <h3 class="heading text-center">
            Create Trade Offer
        </h3>

        <div class="create-area">
            <div element.ref="tabsElement" id="tabs" class="mb-3"></div>
            <form id="offer-form" submit.delegate="createOffer()">
                <div class="create-content">
                    <div class="text-center">
                        <h4>Create Offer Item</h4>
                    </div>
                    <div class="set-area" show.bind="currentTab === 'Import Copied Item'">
                        <mdc-text-field
                            if.bind="!parsing"
                            textarea
                            rows="8"
                            cols="40"
                            class="w-100 item-string-input"
                            label="Item String"
                            value.bind="itemString"
                            outlined.bind="true"
                            input.delegate="handleItemString()"
                        ></mdc-text-field>
                        <span if.bind="parsing">
                            <i class="fa fa-spinner fa-spin white"></i>
                        </span>
                    </div>
                    <div class="set-area" show.bind="currentTab === 'Import from Stash'">
                        Coming Soon
                    </div>
                    <div class="set-area" show.bind="currentTab === 'Set or Unique'">
                        Coming Soon
                    </div>
                    <div class="rare-area" show.bind="currentTab === 'Rare, Magic, or Normal'">
                        <create-rare-item item.two-way="tradeOffer.offeredItem" stats.two-way="tradeOffer.stats"></create-rare-item>
                    </div>
                </div>
                <div class="pricing-area mt-5">
                    <div class="text-center">
                        <h4>Finalize Offer</h4>
                    </div>
                    <div class="item-area" if.bind="tradeOffer.offeredItem">
                        <item-viewer offer.bind="tradeOffer"></item-viewer>
                    </div>
                    <div class="wanted-area row mt-3">
                        <div class="col-8 mb-3">
                            <mdc-select
                                label="Item Wanted"
                                value.bind="tradeOffer.wantedItem"
                                anchor-margin.bind="{top: 10}"
                                outlined.bind="standardSelectOutlined"
                                class="w-100 mb-3"
                            >
                                <mdc-list>
                                    <mdc-list-item repeat.for="currency of currencyItems" value.bind="currency">${currency.name}</mdc-list-item>
                                </mdc-list>
                            </mdc-select>
                        </div>
                        <div class="col-4 mb-3">
                            <mdc-text-field
                                type="number"
                                label="Wanted Quantity"
                                value.bind="tradeOffer.cost"
                                outlined.bind="true"
                            ></mdc-text-field>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="d-inline-block mr-5">
                            <mdc-text-field
                                label="Offer Note"
                                value.bind="tradeOffer.note"
                                outlined.bind="true"
                                maxlength="20"
                            ></mdc-text-field>
                        </div>
                        <div class="d-inline-block mr-5">
                            <mdc-text-field
                                label="Account Name"
                                value.bind="tradeOffer.accountName"
                                outlined.bind="true"
                                maxlength="20"
                            ></mdc-text-field>
                        </div>
                        <div class="d-inline-block">
                            <button mdc-button raised
                                    class="create-button button-secondary"
                                    type="submit">
                                Create Offer
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</template>
